(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{585:function(_,v,e){"use strict";e.r(v);var t=e(3),a=Object(t.a)({},(function(){var _=this,v=_.$createElement,e=_._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[e("meta",{attrs:{name:"referrer",content:"no-referrer"}}),_._v(" "),e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[_._v("#")]),_._v(" 背景")]),_._v(" "),e("p",[_._v("    由于公司要用刚小程序开发个旧项目。历时一个月，来说说遇到的坑吧。")]),_._v(" "),e("p",[e("b",[_._v("用到的技术")])]),_._v(" "),e("ul",[e("li",[_._v("mpvue")]),_._v(" "),e("li",[_._v("vant(weapp)")])]),_._v(" "),e("h3",{attrs:{id:"_1、关于ui框架weapp的引入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、关于ui框架weapp的引入"}},[_._v("#")]),_._v(" 1、关于ui框架"),e("code",[_._v("weapp")]),_._v("的引入")]),_._v(" "),e("p",[e("font",[_._v("不是传统的npm模块的安装引入，安装后需要下载静态文件，")]),_._v("再从"),e("code",[_._v("app.json")]),_._v("中引入，\n看官网链接"),e("RouterLink",{attrs:{to:"/hexo迁移/'https://youzan.github.io/vant-weapp/#/quickstart'"}},[_._v("官网教程")]),_._v("。")],1),_._v(" "),e("h3",{attrs:{id:"_2、app-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、app-json"}},[_._v("#")]),_._v(" 2、app.json")]),_._v(" "),e("ul",[e("li",[_._v("这相当于微信的配置文件，里面可设置增加页面，插件(例如weapp组件的引入)，增加了页面后，每次都要"),e("code",[_._v("npm run dev")]),_._v("，不然不生效。")])]),_._v(" "),e("h3",{attrs:{id:"_3、mpvue-没有路由这个概念。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、mpvue-没有路由这个概念。"}},[_._v("#")]),_._v(" 3、mpvue,没有路由这个概念。")]),_._v(" "),e("ul",[e("li",[_._v("若要使用，请装"),e("code",[_._v("mpvue-router-patch")]),_._v("，这个插件。")]),_._v(" "),e("li",[e("code",[_._v("router.push({ path: '/pages/news/list', reLaunch: true })")]),_._v(",只能跳转7次(或者5次，具体忘了)，可改用"),e("code",[_._v("$router.replace")]),_._v("(但此项不支持微信原生的tab的跳转。)")])]),_._v(" "),e("h3",{attrs:{id:"_4、v-html-无效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、v-html-无效"}},[_._v("#")]),_._v(" 4、v-html 无效")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("html")]),_._v("内想解析"),e("code",[_._v("'<p>213</p>'")]),_._v("字符串标签,用"),e("code",[_._v("v-html")]),_._v("，无效。")]),_._v(" "),e("li",[_._v("解决方法：利用"),e("code",[_._v("mpvue-wxparse")]),_._v("这个插件。")])]),_._v(" "),e("h3",{attrs:{id:"_5、dom问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、dom问题"}},[_._v("#")]),_._v(" 5、dom问题")]),_._v(" "),e("ul",[e("li",[_._v("小程序内没有dom的概念，所有使用到dom的插件都报错。"),e("code",[_._v("querySelector")]),_._v(","),e("code",[_._v("$refs")]),_._v("这些都不可以。。")])]),_._v(" "),e("h3",{attrs:{id:"_6、父子组件传值问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6、父子组件传值问题"}},[_._v("#")]),_._v(" 6、父子组件传值问题")]),_._v(" "),e("ul",[e("li",[_._v("父->子，props传值，子组件的"),e("code",[_._v("html")]),_._v("内渲染时能拿到这个值。")]),_._v(" "),e("li",[_._v("在"),e("code",[_._v("onShow()")]),_._v(","),e("code",[_._v("mounted()")]),_._v("方法内是拿不到的，在"),e("code",[_._v("methods")]),_._v("的方法内可以拿到。（生命周期问题）")]),_._v(" "),e("li",[_._v("解决方法："),e("code",[_._v("vuex")]),_._v(","),e("code",[_._v("watch")]),_._v("这个参数。")])]),_._v(" "),e("h3",{attrs:{id:"_7、textarea问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7、textarea问题"}},[_._v("#")]),_._v(" 7、textarea问题")]),_._v(" "),e("ul",[e("li",[e("p",[_._v("这个是真的操了蛋，"),e("code",[_._v("textarea")]),_._v("内设置了"),e("code",[_._v("placeholder")]),_._v("属性，这个层级是最高的，有弹窗的话，会覆盖这个弹窗。如下图，"),e("code",[_._v("z-index")]),_._v("怎么设置都是无效的。\n"),e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/12/16be5430e937487f?w=558&h=345&f=png&s=34412",alt:"图片"}})])]),_._v(" "),e("li",[e("p",[_._v("解决方法：弹窗打开时隐藏这个"),e("code",[_._v("textarea")]),_._v(",关闭时显示这个"),e("code",[_._v("textarea")]),_._v("。")])])]),_._v(" "),e("h3",{attrs:{id:"_8、wx-chooseimage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8、wx-chooseimage"}},[_._v("#")]),_._v(" 8、wx.chooseImage")]),_._v(" "),e("ul",[e("li",[_._v("如果是多图片上传，数组操作用"),e("code",[_._v(".push()")]),_._v("无法展现。")]),_._v(" "),e("li",[_._v("用"),e("code",[_._v("array.concat()")]),_._v("解决。")])]),_._v(" "),e("h3",{attrs:{id:"_9、图片懒加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9、图片懒加载"}},[_._v("#")]),_._v(" 9、图片懒加载")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("vue-lazyload")]),_._v(" 这货不支持。")]),_._v(" "),e("li",[e("code",[_._v("mpvue-img-load")]),_._v("用着个。")])]),_._v(" "),e("hr"),_._v(" "),e("p",[e("strong",[_._v("我也刚刚入手，如有问题，欢迎指出。")])])])}),[],!1,null,null,null);v.default=a.exports}}]);